# BotTube Architecture - Visual Guide

## ğŸ—ï¸ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER INTERFACE                          â”‚
â”‚                      (React Frontend)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   Landing    â”‚  â”‚   YouTube    â”‚  â”‚   ChatBot    â”‚        â”‚
â”‚  â”‚     Page     â”‚  â”‚    Player    â”‚  â”‚  Interface   â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ HTTP POST Request
                            â”‚ {video_id, question}
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      DJANGO BACKEND                             â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                   URL Router (urls.py)                    â”‚ â”‚
â”‚  â”‚         /api/chat/ â†’ chat_with_video()                   â”‚ â”‚
â”‚  â”‚         /api/health/ â†’ health_check()                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                          â”‚                                     â”‚
â”‚                          â–¼                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚            Serializers (serializers.py)                   â”‚ â”‚
â”‚  â”‚   - Validate incoming data                               â”‚ â”‚
â”‚  â”‚   - Ensure video_id and question are present            â”‚ â”‚
â”‚  â”‚   - Format response data                                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                          â”‚                                     â”‚
â”‚                          â–¼                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              Views (views.py)                            â”‚ â”‚
â”‚  â”‚   - Handle HTTP requests                                â”‚ â”‚
â”‚  â”‚   - Call RAG service                                    â”‚ â”‚
â”‚  â”‚   - Return responses                                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                          â”‚                                     â”‚
â”‚                          â–¼                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚         RAG Service (services/rag_service.py)            â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚  1. Get Transcript (YouTube API + Cache)        â”‚   â”‚ â”‚
â”‚  â”‚  â”‚     â†“                                            â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  2. Create Chunks (split into pieces)           â”‚   â”‚ â”‚
â”‚  â”‚  â”‚     â†“                                            â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  3. Create Embeddings (text â†’ numbers)          â”‚   â”‚ â”‚
â”‚  â”‚  â”‚     â†“                                            â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  4. Find Relevant Chunks (similarity)           â”‚   â”‚ â”‚
â”‚  â”‚  â”‚     â†“                                            â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  5. Generate Answer (Gemini LLM)                â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                       â”‚
            â”‚                       â”‚
            â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Django Cache      â”‚   â”‚   Google Gemini     â”‚
â”‚   - Transcripts     â”‚   â”‚   - Embeddings      â”‚
â”‚   - Faster queries  â”‚   â”‚   - Answer Gen      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Request Flow Diagram

```
1. USER ACTION
   â”‚
   â”œâ”€ Enters YouTube URL
   â”‚  â””â”€ Frontend extracts video_id
   â”‚
   â””â”€ Asks question
      â””â”€ Frontend sends POST request

2. BACKEND RECEIVES
   â”‚
   POST /api/chat/
   {
     "video_id": "dQw4w9WgXcQ",
     "question": "What is this video about?"
   }

3. VALIDATION
   â”‚
   â”œâ”€ ChatRequestSerializer checks:
   â”‚  â”œâ”€ video_id present? âœ“
   â”‚  â”œâ”€ question present? âœ“
   â”‚  â”œâ”€ video_id length OK? âœ“
   â”‚  â””â”€ question not empty? âœ“
   â”‚
   â””â”€ All valid â†’ Continue

4. RAG PROCESSING
   â”‚
   â”œâ”€ Step 1: GET TRANSCRIPT
   â”‚  â”‚
   â”‚  â”œâ”€ Check cache for transcript
   â”‚  â”‚  â””â”€ Found? â†’ Use cached version
   â”‚  â”‚  â””â”€ Not found? â†’ Fetch from YouTube
   â”‚  â”‚
   â”‚  â””â”€ Result: Full transcript text
   â”‚
   â”œâ”€ Step 2: CREATE CHUNKS
   â”‚  â”‚
   â”‚  â”œâ”€ Split transcript into 1000-char pieces
   â”‚  â”œâ”€ Add 200-char overlap
   â”‚  â”‚
   â”‚  â””â”€ Result: ["chunk1", "chunk2", "chunk3", ...]
   â”‚
   â”œâ”€ Step 3: CREATE EMBEDDINGS
   â”‚  â”‚
   â”‚  â”œâ”€ For each chunk â†’ call Gemini API
   â”‚  â”‚  â””â”€ Text â†’ Vector [0.1, 0.5, 0.3, ...]
   â”‚  â”‚
   â”‚  â”œâ”€ For question â†’ call Gemini API
   â”‚  â”‚  â””â”€ Text â†’ Vector [0.12, 0.48, 0.31, ...]
   â”‚  â”‚
   â”‚  â””â”€ Result: Numerical representations
   â”‚
   â”œâ”€ Step 4: FIND RELEVANT CHUNKS
   â”‚  â”‚
   â”‚  â”œâ”€ Calculate cosine similarity
   â”‚  â”‚  â”œâ”€ Question vs Chunk 1 â†’ 0.95 (very similar!)
   â”‚  â”‚  â”œâ”€ Question vs Chunk 2 â†’ 0.45
   â”‚  â”‚  â”œâ”€ Question vs Chunk 3 â†’ 0.89
   â”‚  â”‚  â””â”€ Question vs Chunk 4 â†’ 0.12
   â”‚  â”‚
   â”‚  â”œâ”€ Sort by similarity
   â”‚  â”œâ”€ Take top 3
   â”‚  â”‚
   â”‚  â””â”€ Result: Most relevant chunks
   â”‚
   â””â”€ Step 5: GENERATE ANSWER
      â”‚
      â”œâ”€ Create prompt:
      â”‚  â”‚
      â”‚  â”‚  Context: [relevant chunks]
      â”‚  â”‚  Question: [user question]
      â”‚  â”‚
      â”œâ”€ Send to Gemini
      â”‚
      â””â”€ Result: AI-generated answer

5. RESPONSE
   â”‚
   â””â”€ Return to frontend
      {
        "answer": "This video is about...",
        "video_id": "dQw4w9WgXcQ"
      }

6. DISPLAY
   â”‚
   â””â”€ React shows answer in chat
```

## ğŸ§® RAG Pipeline - Detailed

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    RAG PIPELINE STAGES                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STAGE 1: RETRIEVAL
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Video Transcript (5000 words)                               â”‚
â”‚  â†“                                                            â”‚
â”‚  Chunking                                                     â”‚
â”‚  â”œâ”€ Chunk 1: words 0-150 (overlap: 0-150)                   â”‚
â”‚  â”œâ”€ Chunk 2: words 120-270 (overlap: 120-150)               â”‚
â”‚  â”œâ”€ Chunk 3: words 240-390 (overlap: 240-270)               â”‚
â”‚  â””â”€ ... (continues)                                          â”‚
â”‚  â†“                                                            â”‚
â”‚  Embedding                                                    â”‚
â”‚  â”œâ”€ Chunk 1 â†’ [0.1, 0.5, 0.3, 0.8, ...]  (768 dimensions)   â”‚
â”‚  â”œâ”€ Chunk 2 â†’ [0.2, 0.4, 0.6, 0.7, ...]                     â”‚
â”‚  â””â”€ Question â†’ [0.15, 0.48, 0.32, 0.75, ...]                â”‚
â”‚  â†“                                                            â”‚
â”‚  Similarity Search                                            â”‚
â”‚  â”œâ”€ Cosine Similarity (Question, Chunk 1) = 0.95            â”‚
â”‚  â”œâ”€ Cosine Similarity (Question, Chunk 2) = 0.45            â”‚
â”‚  â”œâ”€ Cosine Similarity (Question, Chunk 3) = 0.89            â”‚
â”‚  â””â”€ Select top 3 most similar                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STAGE 2: AUGMENTATION
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Build Context                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Chunk 1 (Score: 0.95)                                â”‚   â”‚
â”‚  â”‚ "The video discusses the history of..."              â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚ Chunk 3 (Score: 0.89)                                â”‚   â”‚
â”‚  â”‚ "...focusing on key events in 1987..."              â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚ Chunk 2 (Score: 0.45)                                â”‚   â”‚
â”‚  â”‚ "...which became a cultural phenomenon..."          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â†“                                                            â”‚
â”‚  Create Prompt                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ You are a helpful assistant.                         â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚ Context: [combined chunks above]                     â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚ Question: What is this video about?                  â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚ Answer:                                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STAGE 3: GENERATION
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Gemini LLM                                                  â”‚
â”‚  â”œâ”€ Receives: Prompt with context                           â”‚
â”‚  â”œâ”€ Processes: Using AI model                               â”‚
â”‚  â””â”€ Generates: Natural language answer                      â”‚
â”‚  â†“                                                            â”‚
â”‚  Answer                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ "This video is about the history of music,          â”‚   â”‚
â”‚  â”‚  specifically focusing on events in 1987 that       â”‚   â”‚
â”‚  â”‚  became a cultural phenomenon..."                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”¢ Embeddings Visualization

```
What are embeddings?

TEXT SPACE          â†’         VECTOR SPACE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

"Cat"               â†’         [0.8, 0.2, 0.1]
                                    â”‚
"Kitten"            â†’         [0.79, 0.21, 0.11]
                                    â”‚ Close together!
"Feline"            â†’         [0.78, 0.19, 0.12]

"Car"               â†’         [0.1, 0.9, 0.8]
                                    â”‚
"Vehicle"           â†’         [0.11, 0.89, 0.81]
                                    â”‚ Close together!
"Automobile"        â†’         [0.09, 0.91, 0.79]

Similar meanings â†’ Similar vectors
```

## ğŸ¯ Cosine Similarity Explained

```
Measuring Similarity Between Vectors

Vector A: [3, 4]        Vector B: [6, 8]
     â”‚                       â”‚
     â”‚                       â”‚
     â”‚      â•±                â”‚      â•±
     â”‚    â•±                  â”‚    â•±
     â”‚  â•±  Î¸ (angle)         â”‚  â•±  Î¸ (same angle!)
     â”‚â•±                      â”‚â•±
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º

Cosine Similarity = cos(Î¸)

Same direction (Î¸=0Â°)   â†’ cos(0Â°)  = 1.0  (identical)
Small angle (Î¸=30Â°)     â†’ cos(30Â°) = 0.87 (very similar)
Perpendicular (Î¸=90Â°)   â†’ cos(90Â°) = 0.0  (unrelated)
Opposite (Î¸=180Â°)       â†’ cos(180Â°) = -1.0 (opposite)

In our code:
similarity = dot_product(A, B) / (magnitude(A) * magnitude(B))
```

## ğŸ“Š Data Flow Through Components

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    COMPONENT INTERACTIONS                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Frontend (React)
    â”‚
    â”‚ axios.post('/api/chat/', {video_id, question})
    â”‚
    â–¼
Django URLs (urls.py)
    â”‚
    â”‚ Route: /api/chat/ â†’ chat_with_video
    â”‚
    â–¼
Serializer (serializers.py)
    â”‚
    â”‚ Validate: video_id, question
    â”‚
    â–¼
View (views.py)
    â”‚
    â”‚ rag_service.get_answer(video_id, question)
    â”‚
    â–¼
RAG Service (rag_service.py)
    â”‚
    â”œâ”€â”€â†’ Cache
    â”‚    â””â”€ Check for cached transcript
    â”‚
    â”œâ”€â”€â†’ YouTube API
    â”‚    â””â”€ Fetch transcript if not cached
    â”‚
    â”œâ”€â”€â†’ Gemini API (Embeddings)
    â”‚    â””â”€ Convert chunks and question to vectors
    â”‚
    â”œâ”€â”€â†’ NumPy
    â”‚    â””â”€ Calculate cosine similarities
    â”‚
    â””â”€â”€â†’ Gemini API (Generation)
         â””â”€ Generate answer from context
    â”‚
    â–¼
Response flows back up the chain
```

## ğŸ—‚ï¸ File Organization

```
server/
â”‚
â”œâ”€â”€ server/                      # Django project settings
â”‚   â”œâ”€â”€ settings.py             # Configuration
â”‚   â”œâ”€â”€ urls.py                 # Main URL routing
â”‚   â””â”€â”€ wsgi.py                 # WSGI config
â”‚
â”œâ”€â”€ api/                         # Django app
â”‚   â”œâ”€â”€ views.py                # ğŸ”µ API endpoints
â”‚   â”‚   â”œâ”€â”€ chat_with_video()   #    - Main chat endpoint
â”‚   â”‚   â””â”€â”€ health_check()      #    - Health check
â”‚   â”‚
â”‚   â”œâ”€â”€ serializers.py          # ğŸŸ¢ Data validation
â”‚   â”‚   â”œâ”€â”€ ChatRequestSerializer
â”‚   â”‚   â”œâ”€â”€ ChatResponseSerializer
â”‚   â”‚   â””â”€â”€ ErrorResponseSerializer
â”‚   â”‚
â”‚   â”œâ”€â”€ urls.py                 # ğŸŸ¡ URL routing
â”‚   â”‚   â”œâ”€â”€ /chat/ â†’ chat_with_video
â”‚   â”‚   â””â”€â”€ /health/ â†’ health_check
â”‚   â”‚
â”‚   â””â”€â”€ services/               # ğŸ”´ Business logic
â”‚       â”œâ”€â”€ __init__.py
â”‚       â””â”€â”€ rag_service.py      # RAG implementation
â”‚           â”œâ”€â”€ __init__()      #    - Initialize models
â”‚           â”œâ”€â”€ get_answer()    #    - Main method
â”‚           â”œâ”€â”€ _get_transcript() #  - Fetch transcript
â”‚           â”œâ”€â”€ _create_chunks() #   - Split text
â”‚           â”œâ”€â”€ _create_embeddings() # - Text to vectors
â”‚           â”œâ”€â”€ _find_relevant_chunks() # - Similarity
â”‚           â””â”€â”€ _generate_answer() # - LLM generation
â”‚
â”œâ”€â”€ .env                        # Environment variables
â”œâ”€â”€ requirements.txt            # Dependencies
â””â”€â”€ manage.py                   # Django management
```

## ğŸš¦ Error Handling Flow

```
Request Received
    â”‚
    â”œâ”€ Validation Error?
    â”‚  â””â”€â–º Return 400 Bad Request
    â”‚      {
    â”‚        "video_id": ["This field is required"],
    â”‚        "question": ["Question too short"]
    â”‚      }
    â”‚
    â”œâ”€ Transcript Fetch Error?
    â”‚  â””â”€â–º Return 500 Internal Error
    â”‚      {
    â”‚        "error": "Failed to fetch transcript",
    â”‚        "detail": "Video may not have captions"
    â”‚      }
    â”‚
    â”œâ”€ Embedding Error?
    â”‚  â””â”€â–º Return 500 Internal Error
    â”‚      {
    â”‚        "error": "Failed to create embeddings",
    â”‚        "detail": "API key invalid"
    â”‚      }
    â”‚
    â””â”€ Success?
       â””â”€â–º Return 200 OK
           {
             "answer": "...",
             "video_id": "..."
           }
```

## ğŸ¨ Technology Stack

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           FRONTEND (React)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  React   â”‚  Axios   â”‚ Lucide   â”‚        â”‚
â”‚  â”‚  Hooks   â”‚  (HTTP)  â”‚  Icons   â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ HTTP/JSON
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        BACKEND (Django)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Django REST Framework               â”‚  â”‚
â”‚  â”‚  â”œâ”€ Serializers                      â”‚  â”‚
â”‚  â”‚  â”œâ”€ Views                            â”‚  â”‚
â”‚  â”‚  â””â”€ URL Routing                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  RAG Service                         â”‚  â”‚
â”‚  â”‚  â”œâ”€ Transcript Processing            â”‚  â”‚
â”‚  â”‚  â”œâ”€ Chunking                         â”‚  â”‚
â”‚  â”‚  â”œâ”€ Embeddings                       â”‚  â”‚
â”‚  â”‚  â””â”€ Answer Generation                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                â”‚                â”‚
    â–¼                â–¼                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚YouTube â”‚    â”‚  Gemini  â”‚    â”‚  NumPy   â”‚
â”‚  API   â”‚    â”‚   API    â”‚    â”‚ (Math)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” Cache Strategy

```
First Request for Video "ABC123"
    â”‚
    â””â”€â–º Cache: MISS
        â””â”€â–º Fetch from YouTube API (slow ~2s)
            â””â”€â–º Store in cache
                â””â”€â–º Return transcript

Second Request for Video "ABC123"
    â”‚
    â””â”€â–º Cache: HIT âœ“
        â””â”€â–º Return from cache (fast ~0.01s)

Cache Key Format: "transcript_{video_id}"
Cache Duration: 1 hour (3600 seconds)
```

## ğŸ“ Learning Progression

```
Level 1: Setup
â”œâ”€ Install dependencies
â”œâ”€ Configure API keys
â””â”€ Run basic tests

Level 2: Understanding
â”œâ”€ Read SETUP_GUIDE.md
â”œâ”€ Understand file structure
â””â”€ Test API endpoints

Level 3: Deep Dive
â”œâ”€ Read RAG_EXPLAINED.md
â”œâ”€ Understand each component
â””â”€ Learn Python concepts

Level 4: Customization
â”œâ”€ Modify chunk sizes
â”œâ”€ Try different models
â””â”€ Add new features

Level 5: Optimization
â”œâ”€ Implement Redis cache
â”œâ”€ Add rate limiting
â””â”€ Deploy to production
```

---

This visual guide should help you understand the architecture at a glance!
